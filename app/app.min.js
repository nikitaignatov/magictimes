!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";var d=c(1),e=c(2),f=c(13),g=window.ReactRouter.Router,h=window.ReactRouter.Route,i=window.ReactRouter.IndexRoute,j=(window.ReactRouter.Link,window.ReactRouter.hashHistory),k=d.createClass({displayName:"ImportUsers",render:function(){return d.createElement("a",{href:"#",onClick:this.importUsers},d.createElement("i",{className:"fa fa-circle-o text-red"})," ",d.createElement("span",null,"Import users"))},connectToHub:function(){this.magic=$.connection.nfcHub,this.magic.client.update=this.update,this.setState({magic:this.magic}),$.connection.hub.url="http://localhost:9000/signalr",$.connection.hub.start()},componentDidMount:function(){this.connectToHub()},importUsers:function(){this.magic.server.importUsers()}}),l=d.createClass({displayName:"App",render:function(){return d.createElement("div",null,this.props.children)}});ReactDOM.render(d.createElement(g,{history:j},d.createElement(h,{path:"/",component:l},d.createElement(i,{component:e}),d.createElement(h,{path:"users",component:f})),d.createElement(h,{path:"/sessions",component:e}),d.createElement(h,{path:"/settings",component:e}),d.createElement(h,{path:"/notifications",component:e})),document.getElementById("dashboard")),ReactDOM.render(d.createElement(k,null),document.getElementById("import-users"))},function(a,b){a.exports=React},function(a,b,c){"use strict";function d(){return{data:f.getAll(),magic:f.getHub()}}var e=c(1),f=c(3),g=e.createClass({displayName:"PanelHeader",render:function(){var a=this.props.session.Value;return e.createElement("div",{className:"box-header with-border"},e.createElement("h3",{className:"box-title"},e.createElement("strong",null,a.Name)),e.createElement("div",{className:"box-tools pull-right"},e.createElement("span",{"data-toggle":"tooltip",title:"3 New Messages",className:"badge bg-green"}),e.createElement("button",{type:"button",className:"btn btn-box-tool","data-widget":"collapse"},e.createElement("i",{className:"fa fa-minus"})),e.createElement("button",{type:"button",className:"btn btn-box-tool remove-session","data-widget":"remove",onClick:this.deleteSession},e.createElement("i",{className:"fa fa-times"}))))},deleteSession:function(a){this.props.deleteSession(this.props.session.Key)}}),h=e.createClass({displayName:"SessionForm",render:function(){var a=[];return this.props.session.Value.IsMissingTicket&&a.push(e.createElement("div",{className:"form-group",key:"ticket"},e.createElement("input",{type:"number",ref:"ticket",className:"form-control",placeholder:"Tickt id"}))),this.props.session.Value.IsMissingMessage&&a.push(e.createElement("div",{className:"form-group",key:"message"},e.createElement("textarea",{type:"text",ref:"message",className:"form-control",placeholder:"Message.."}))),e.createElement("div",{className:"box-body"},e.createElement("form",{onSubmit:this.onSubmit},a))},onSubmit:function(a){a.preventDefault();var b=this.props.session,c=this.refs.ticket.value.trim(),d=this.refs.message.value.trim();this.props.commentOn(b.Value.Transaction.TransactionId,d,c,1)}}),i=e.createClass({displayName:"SessionPanelList",render:function(){var a=this.props.magic,b=this.props.data.map(function(b){return e.createElement(k,{session:b,key:b.Key,magic:a})});return e.createElement("div",{className:"col-xs-12"},b)}}),j=e.createClass({displayName:"SessionDetails",render:function(){var a=this.props.session.Value;return a.Start=moment(a.Transaction.Started,moment.ISO_8601).fromNow(),a.End=moment(a.Transaction.Ended,moment.ISO_8601).fromNow(),a.Duration=moment.duration(a.Transaction.Duration).humanize(),e.createElement("table",{className:"table text-muted table-striped table-hover"},e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",null,"Duration"),e.createElement("th",null,a.Duration)),e.createElement("tr",null,e.createElement("td",null,"Started"),e.createElement("td",null,a.Start)),e.createElement("tr",null,e.createElement("td",null,"Ended"),e.createElement("td",null,a.End)),e.createElement("tr",null,e.createElement("td",null,"Ticket"),e.createElement("td",null,a.Ticket)),e.createElement("tr",null,e.createElement("td",null,"TimeEntryId"),e.createElement("td",null,a.TimeEntryId)),e.createElement("tr",null,e.createElement("td",null,"Tx"),e.createElement("td",null,a.Transaction.TransactionId))))}}),k=e.createClass({displayName:"SessionPanel",render:function(){var a=this.props.session;return e.createElement("div",{className:"box box-info"},e.createElement(g,{session:a,deleteSession:this.props.magic.server.remove}),e.createElement("div",{className:"box-body"},e.createElement("h3",null," ",this.props.session.Value.Message)),e.createElement(h,{session:this.props.session,commentOn:this.props.magic.server.commentOn}),e.createElement(j,{session:this.props.session}))}}),l=e.createClass({displayName:"Sessions",render:function(){return e.createElement("div",null,e.createElement(i,{data:this.props.data,magic:this.props.magic}))}}),m=e.createClass({displayName:"Dashboard",getInitialState:function(){return d()},onChange:function(){this.setState(d())},componentDidMount:function(){f.addChangeListener(this.onChange)},componentWillUnmount:function(){f.removeChangeListener(this.onChange)},update:function(a){this.setState({data:a})},render:function(){return console.log("dash",this.state),e.createElement("div",{className:"row"},e.createElement("div",{className:"col-lg-4 col-sm-12"},e.createElement("div",null,e.createElement("h3",null,"Not processed sessions")),e.createElement("section",{className:"row",id:"missing-message"},e.createElement(l,{data:this.state.data.new_sessions,magic:this.state.magic}))),e.createElement("div",{className:"col-lg-4 col-sm-12"},e.createElement("div",null,e.createElement("h3",null,"Ready to be submitted")),e.createElement("section",{className:"row",id:"missing-ticket"},e.createElement(l,{data:this.state.data.ready_to_submit,magic:this.state.magic}))),e.createElement("div",{className:"col-lg-4 col-sm-12"},e.createElement("div",null,e.createElement("h3",null,"Submitted")),e.createElement("section",{clasName:"row",id:"complete"},e.createElement(l,{data:this.state.data.complete,magic:this.state.magic}))),e.createElement("div",null))}});a.exports=m},function(a,b,c){"use strict";function d(a,b,c,d){l.server.commentOn(a,b,c,d)}function e(a){k=a,m.emitChange()}var f=c(4),g=c(9).EventEmitter,h=c(10),i=c(12),j="change",k={new_sessions:[],ready_to_submit:[],complete:[],users:[]},l={};!function(){l=$.connection.nfcHub,l.client.update=e,$.connection.hub.url="http://localhost:9000/signalr",$.connection.hub.start()}();var m=i({},g.prototype,{getAll:function(){return k},getHub:function(){return l},emitChange:function(){this.emit(j)},addChangeListener:function(a){this.on(j,a)},removeChangeListener:function(a){this.removeListener(j,a)}});f.register(function(a){var b;switch(a.actionType){case h.SESSION_UPDATE_MESSAGE:b=a.text.trim(),""!==b&&(d(a.id,b,"232",1),m.emitChange())}}),a.exports=m},function(a,b,c){"use strict";var d=c(5).Dispatcher;a.exports=new d},function(a,b,c){a.exports.Dispatcher=c(6)},function(a,b,c){(function(d){"use strict";function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var f=c(8),g="ID_",h=function(){function a(){e(this,a),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}return a.prototype.register=function(a){var b=g+this._lastID++;return this._callbacks[b]=a,b},a.prototype.unregister=function(a){this._callbacks[a]?void 0:"production"!==d.env.NODE_ENV?f(!1,"Dispatcher.unregister(...): `%s` does not map to a registered callback.",a):f(!1),delete this._callbacks[a]},a.prototype.waitFor=function(a){this._isDispatching?void 0:"production"!==d.env.NODE_ENV?f(!1,"Dispatcher.waitFor(...): Must be invoked while dispatching."):f(!1);for(var b=0;b<a.length;b++){var c=a[b];this._isPending[c]?this._isHandled[c]?void 0:"production"!==d.env.NODE_ENV?f(!1,"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",c):f(!1):(this._callbacks[c]?void 0:"production"!==d.env.NODE_ENV?f(!1,"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",c):f(!1),this._invokeCallback(c))}},a.prototype.dispatch=function(a){this._isDispatching?"production"!==d.env.NODE_ENV?f(!1,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."):f(!1):void 0,this._startDispatching(a);try{for(var b in this._callbacks)this._isPending[b]||this._invokeCallback(b)}finally{this._stopDispatching()}},a.prototype.isDispatching=function(){return this._isDispatching},a.prototype._invokeCallback=function(a){this._isPending[a]=!0,this._callbacks[a](this._pendingPayload),this._isHandled[a]=!0},a.prototype._startDispatching=function(a){for(var b in this._callbacks)this._isPending[b]=!1,this._isHandled[b]=!1;this._pendingPayload=a,this._isDispatching=!0},a.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},a}();a.exports=h}).call(b,c(7))},function(a,b){function c(){j&&g&&(j=!1,g.length?i=g.concat(i):k=-1,i.length&&d())}function d(){if(!j){var a=setTimeout(c);j=!0;for(var b=i.length;b;){for(g=i,i=[];++k<b;)g&&g[k].run();k=-1,b=i.length}g=null,j=!1,clearTimeout(a)}}function e(a,b){this.fun=a,this.array=b}function f(){}var g,h=a.exports={},i=[],j=!1,k=-1;h.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];i.push(new e(a,b)),1!==i.length||j||setTimeout(d,0)},e.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=f,h.addListener=f,h.once=f,h.off=f,h.removeListener=f,h.removeAllListeners=f,h.emit=f,h.binding=function(a){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(a){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(a,b,c){(function(b){"use strict";var c=function(a,c,d,e,f,g,h,i){if("production"!==b.env.NODE_ENV&&void 0===c)throw new Error("invariant requires an error message argument");if(!a){var j;if(void 0===c)j=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var k=[d,e,f,g,h,i],l=0;j=new Error("Invariant Violation: "+c.replace(/%s/g,function(){return k[l++]}))}throw j.framesToPop=1,j}};a.exports=c}).call(b,c(7))},function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}a.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),c.apply(this,h)}else if(f(c))for(h=Array.prototype.slice.call(arguments,1),j=c.slice(),e=j.length,i=0;e>i;i++)j[i].apply(this,h);return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned&&(e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())),this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(0>e)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(d(b))return 1;if(b)return b.length}return 0},c.listenerCount=function(a,b){return a.listenerCount(b)}},function(a,b,c){"use strict";var d=c(11);a.exports=d({SESSION_LOAD_ALL:null,SESSION_START:null,SESSION_END:null,SESSION_UPDATE_MESSAGE:null,SESSION_SUBMITTED:null})},function(a,b){"use strict";var c=function(a){var b,c={};if(!(a instanceof Object)||Array.isArray(a))throw new Error("keyMirror(...): Argument must be an object.");for(b in a)a.hasOwnProperty(b)&&(c[b]=b);return c};a.exports=c},function(a,b){"use strict";function c(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function d(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var b={},c=0;10>c;c++)b["_"+String.fromCharCode(c)]=c;var d=Object.getOwnPropertyNames(b).map(function(a){return b[a]});if("0123456789"!==d.join(""))return!1;var e={};return"abcdefghijklmnopqrst".split("").forEach(function(a){e[a]=a}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},e)).join("")}catch(f){return!1}}var e=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;a.exports=d()?Object.assign:function(a,b){for(var d,g,h=c(a),i=1;i<arguments.length;i++){d=Object(arguments[i]);for(var j in d)e.call(d,j)&&(h[j]=d[j]);if(Object.getOwnPropertySymbols){g=Object.getOwnPropertySymbols(d);for(var k=0;k<g.length;k++)f.call(d,g[k])&&(h[g[k]]=d[g[k]])}}return h}},function(a,b,c){"use strict";var d=c(1),e=c(14),f=d.createClass({displayName:"UserList",getInitialState:function(){return{data:{new_sessions:[],ready_to_submit:[],complete:[],users:[]},magic:{}}},update:function(a){this.setState({data:a})},connectToHub:function(){this.magic=$.connection.nfcHub,this.magic.client.update=this.update,this.setState({magic:this.magic}),$.connection.hub.url="http://localhost:9000/signalr",$.connection.hub.start()},componentDidMount:function(){this.connectToHub()},render:function(){console.log("users");var a=this.state.data.users.map(function(a){return d.createElement(e,{user:a,key:a.Username})});return d.createElement("div",{className:"col-xs-12"},a)}});a.exports=f},function(a,b,c){"use strict";var d=c(1),e=d.createClass({displayName:"User",render:function(){var a=this.props.user;return d.createElement("div",{className:"box box-info"},d.createElement("div",{className:"box-body"},d.createElement("h3",null," ",a.Name)))}});a.exports=e}]);